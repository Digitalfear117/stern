{# templates/home.html #}

{% extends "base.html" %}

{% block content %}
<div class="content-wrapper">
    <div class="left-side">
        <div class="about-wrapper">
            <div class="blurb-box">
                <div class="blurb-text" id="about-header">
                    <b>osu!</b> is a <b>free-to-play</b> online rhythm game
                </div>
                <div class="blurb-text">
                    osu! gameplay is based on a variety of popular commercial rhythm games. While keeping some authentic elements, osu! adds huge customisation via skins/beatmaps/storyboarding, online rankings, multiplayer and boasts a community with over 100,000 active users! Play the way you want to play, with your own music, and share your creations with others.
                </div>
            </div>
        </div>

        <div class="announcements-wrapper">
            <h2 class="headers">Announcements</h2>
            {% for announcement in announcements %}
                <div class="announcements">
                    <div class="blurb-heading">
                        {{ announcement['date'] }} <a href="{{ announcement['link'] }}"><b>{{ announcement['title'] }}</b></a> ({{ announcement['author'] }})
                    </div>
                    <div class="blurb-box">
                        <div class="blurb-text">
                            {{ announcement['text'] }}
                        </div>
                    </div>
                    <div class="blurb-readmore">
                        <a href="{{ announcement['link'] }}">Read More / Comment...</a>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="bottom-stats">
            <div class="stats-wrapper">
                <h2 class="headers">Online Users</h2>
                <!-- Placeholder -->
                <img src="/stats/useractivity" alt="useractivity">
            </div>

            <div class="chat-wrapper">
                <h2 class="headers">Chat</h2>
                <table class="styled-table">
                    <tbody>
                    {% for message in messages %}
                        {% if loop.index0 % 2 %}
                            <tr class="light-row">
                        {% else %}
                            <tr class="dark-row">
                        {% endif %}
                            <td style="color: grey; width: 10%">{{ message.time.strftime("%H:%M:%S") }}</th>
                            <td>
                                {{ message.sender }}: {{ message.message }}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="right-side">
        <!-- Placeholder -->
        <a href="/p/download">
            <img src="https://web.archive.org/web/20130502101901im_/https://s.ppy.sh/images/osu-download.png" alt="Download"/>
        </a>
        <a href="/p/market">
            <img src="https://web.archive.org/web/20130502101901im_/https://s.ppy.sh/images/osu-goodies.png" alt="Market"/>
        </a>
        <a href="/p/support">
            <img src="https://web.archive.org/web/20130502101901im_/https://s.ppy.sh/images/osu-support.png" alt="Market"/>
        </a>
        <iframe style="margin-top: 5px;" width="356" height="278" src="https://www.youtube.com/embed/UYNpkDrCWtA" title="Cookiezi | xi - Blue Zenith [FOUR DIMENSIONS] | HR 99.71% 727pp | Liveplay w/ Twitch Chat" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        <div class="most-played">
            <h2 class="headers">
                Most Played Beatmaps
                <!-- TODO: Last 24 hours lol -->
                <!-- <span>Over the last 24 hours</span> -->
            </h2>
            <table class="styled-table">
                <thead>
                    <tr>
                      <th scope="col">Plays</th>
                      <th scope="col" style="text-align: center;">Artist / Title</th>
                      <th scope="col">Creator</th>
                    </tr>
                </thead>
                <tbody>
                {% for count, set in beatmapsets %}
                    {% if loop.index0 % 2 %}
                        <tr class="light-row">
                    {% else %}
                        <tr class="dark-row">
                    {% endif %}
                        <td>{{ count }}</th>
                        <td>
                            <a href="/s/{{ set.id }}">
                                <img src="https://s.lekuru.xyz/mt/{{ set.id }}" alt="image"/>
                                {{ set.full_name }}
                            </a>
                        </td>
                    {% if set.server == 0 %}
                        <td><a href="https://osu.ppy.sh/u/{{ set.creator }}">{{ set.creator }}</a></td>
                    {% else %}
                        <td><a href="/u/{{ set.creator }}">{{ set.creator }}</a></td>
                    {% endif %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock content %}