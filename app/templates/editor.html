{# templates/editor.html #}

<p class="bbcode-help">
    This section is formatted in bbcode. Learn more about it <a href="https://osu.ppy.sh/wiki/en/BBCode">here</a>!
</p>
<textarea class="bbcode-editor" name="bbcode" style="resize: none; min-height: {{ context['min-height'] }};">
{%- if context['current'] -%}
    {{ context['current'] | replace('\\r\\n', '\n') | replace('\\n', '\\n') }}
{%- endif -%}
</textarea><br>

{% if context['forum-controls'] %}
<div style="margin: 12px; float: right; text-align: right;">
    <input type="checkbox" class="radio" name="notify">
    <label for="notify">Notify me when a reply is posted</label>
    {% if current_user_is_admin %}
    <div style="margin-bottom: 10px; margin-top: 10px">
        Post topic as:
        <input type="radio" name="type" value="global" id="global" checked>
        <label for="global">Global</label>
        <input type="radio" name="type" value="pinned" id="pinned">
        <label for="pinned">Pinned</label>
        <input type="radio" name="type" value="announcement" id="announcement">
        <label for="announcement">Announcement</label>
    </div>
    {% endif %}
</div>
{% endif %}

<input type="hidden" name="user_id" value="{{ context['user-id'] }}">
<div class="post-buttons" style="justify-content: flex-start;">
    <input type="submit" value="{{ context['submit-text'] }}" class="button-blue">
    <button class="bbcode-preview-button button-blue" onclick="return loadBBCodePreview(this)">Preview</button>
    {% if context['cancel'] %}
        <a href="./" class="button-red">Cancel</a>
    {% endif %}
</div>

{% if context['current'] %}
    <div class="bbcode-preview bbcode">
        {{ context['current']|bbcode_nowrap|safe }}
    </div>
{% endif %}
